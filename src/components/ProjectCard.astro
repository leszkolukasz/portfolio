---
import { Image } from "astro:assets"
import { cn } from "@/utils"
import type { Skill } from "@/types"
import SkillList from "./SkillList.astro"

export type Props = {
  component?: any
  class?: string
  href?: string
  heading: string
  subheading: string
  image?: string
  altText?: string
  skills: Skill[]
}

const {
  component: Tag = "a",
  class: className,
  href,
  heading,
  subheading,
  image,
  altText,
  skills,
} = Astro.props
---

<Tag
  class={cn(
    className,
    "flex flex-col gap-y-3 rounded-2xl border border-border bg-primary-foreground ",
    href && "transition-all hover:border-foreground/25 hover:shadow-sm",
  )}
  href={href}
>
  {
    image != null && (
      <Image
        src={image}
        alt={altText ?? ""}
        class="loading h-48 w-full rounded-2xl rounded-bl-none rounded-br-none object-cover"
        loading="eager"
        inferSize
        class:list={["!object-contain"]}
      />
    )
  }
  <div class="flex h-full flex-col justify-between gap-y-4 px-5 py-4">
    <div class="flex flex-col gap-y-0.5">
      <h1 class="text-lg font-medium">{heading}</h1>
      <h2 class="text-muted-foreground">{subheading}</h2>
    </div>
    <SkillList skills={skills} small />
  </div>

  <slot />
</Tag>
